import React, { useState, useEffect } from 'react';
import tailwind from 'twrnc';
import { StatusBar } from 'expo-status-bar';
import { useNavigation } from '@react-navigation/native';
import { Feather } from '@expo/vector-icons';

import {
    View,
    Text,
    TouchableOpacity,
    Alert,
    Modal,
    Pressable,
    StyleSheet,
    TextInput
} from "react-native";

import Svg, {
    Path,
    Circle
} from 'react-native-svg';

export default function TableExternal(props) {
    const { row } = props;
    const [data, setData] = useState([]);
    const navigation = useNavigation();
    const [showDots, setShowDots] = useState(true);

    useEffect(() => {
        fetch('https://slogan.com.bo/vulcano/ordersExternalsServices/getByOrderId/' + row.id)
            .then(response => response.json())
            .then(data => {
                if (data.status) {
                    // console.log(data.data);
                    setData(data.data)
                } else {
                    console.error(data.error)
                }
            })
            .then(setShowDots(false))
    }, []);

    return (
            <View>
                <Table data={data} navigation={navigation} />
            </View>
    )
}

const Table = (props) => {
    const { data, navigation } = props;
    return (
        <View>
            {data.map(item => <TableRow key={data.id} item={item} navigation={navigation} />)}
        </View>
    );
};

class TableRow extends React.Component {
    render() {
        let item = this.props.item;
        let key = this.props.key;
        let navigation = this.props.navigation
        return (
            <View key={key}>
                <View style={tailwind.style(
                    "flex flex-row items-center w-[380px] h-[90px] bg-[#FFFFFF] rounded-5 pl-[12px] pr-[12px] mt-4"
                )}>
                    <View style={tailwind.style("flex w-[65px]")}>
                        <View style={tailwind.style("flex justify-center items-center bg-[#F6F6FA] w-[50px] h-[50px] rounded-full")}>
                            <Svg width="35" height="20" viewBox="0 0 30 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <Path d="M0 11.5234C0.159725 11.2479 0.40401 11.1841 0.697836 11.1885C1.42984 11.2 2.16269 11.192 2.89469 11.192C2.99719 11.192 3.10054 11.192 3.23293 11.192C2.41381 9.9482 2.43858 8.83105 3.27137 8.06915C4.09049 7.31965 5.24188 7.32585 6.0388 8.08421C6.86561 8.87091 6.88525 9.97744 6.07467 11.1655H13.8875C13.0778 9.89239 13.112 8.82573 13.9755 8.04789C14.7681 7.33294 15.8794 7.33294 16.6746 8.04966C17.5347 8.82396 17.5689 9.90302 16.7574 11.1699H20.9334V10.7907C20.9334 7.52962 20.9334 4.26763 20.9351 1.00652C20.9351 0.846168 20.9445 0.681385 20.9769 0.525462C21.0427 0.204755 21.334 -0.016727 21.6397 0.000991596C21.9558 0.0187102 22.2188 0.254367 22.2624 0.579503C22.2855 0.748716 22.2795 0.922358 22.2829 1.09423C22.2863 1.26433 22.2829 1.43442 22.2829 1.65148H22.6502C24.5054 1.65148 26.3606 1.65148 28.2166 1.65148C28.7795 1.65148 28.876 1.72678 28.97 2.30264C29.3134 4.4076 29.6499 6.51257 29.9873 8.61842C30.0018 8.7079 29.9992 8.80004 29.9992 8.89129C29.9992 10.3398 30.0009 11.7883 29.9992 13.2368C29.9992 13.732 29.8421 13.8977 29.3714 13.8995C28.6207 13.9021 27.8699 13.8995 27.0815 13.8995C27.0875 14.9652 26.7227 15.8458 25.8857 16.4704C25.3894 16.8407 24.8231 17.0188 24.2073 16.9984C23.4172 16.9727 22.7518 16.6556 22.212 16.0576C21.6705 15.4569 21.474 14.7207 21.4595 13.9119H9.95761C9.95078 14.9457 9.60997 15.8166 8.79597 16.4394C8.26726 16.8434 7.66936 17.0303 7.01081 16.9949C5.46567 16.9116 4.51928 15.8352 4.31855 13.8995C4.12124 13.8995 3.91881 13.8995 3.71638 13.8995C3.00317 13.8995 2.28911 13.872 1.57846 13.9065C0.795208 13.9455 0.261368 13.6399 0.000854144 12.8603V11.5234H0ZM22.2991 11.1726H29.0255C29.0255 10.3256 29.0938 9.49107 29.0093 8.67335C28.8863 7.48887 28.6531 6.31678 28.4643 5.13938C28.332 4.3137 28.1953 3.4889 28.0595 2.66232H22.2983V11.1726H22.2991ZM7.13979 12.1896C6.12677 12.1932 5.29057 13.064 5.29655 14.1076C5.30338 15.1548 6.14642 16.023 7.15175 16.0195C8.16049 16.015 8.9967 15.1406 8.99072 14.0952C8.98474 13.0383 8.15622 12.1861 7.13979 12.1896ZM22.4341 14.1103C22.4384 15.1628 23.2754 16.0266 24.285 16.0195C25.2903 16.0124 26.1359 15.1273 26.1274 14.0926C26.1189 13.0419 25.2809 12.1852 24.2671 12.1896C23.2489 12.194 22.4298 13.0534 22.4341 14.1103V14.1103ZM10.1617 12.1994C10.4821 12.4545 10.7383 12.6662 11.0039 12.8638C11.0603 12.9054 11.15 12.9134 11.2243 12.9134C14.6588 12.9161 18.0933 12.9161 21.5287 12.9116C21.6047 12.9116 21.7123 12.8815 21.7508 12.8257C21.8849 12.6335 21.9942 12.4235 22.1257 12.1985H10.1617V12.1994ZM4.99076 12.2153H0.961766C0.925038 12.8443 0.989099 12.9161 1.55881 12.9161C2.4847 12.9161 3.41145 12.9205 4.33734 12.9099C4.44411 12.909 4.58334 12.8541 4.64996 12.7725C4.77979 12.614 4.86947 12.4191 4.99076 12.2144V12.2153ZM4.64142 10.7438C5.23846 10.7464 5.72533 10.2547 5.73472 9.63902C5.74326 9.02241 5.23419 8.49085 4.63971 8.49794C4.04864 8.50414 3.56861 9.01001 3.56947 9.62661C3.56947 10.2485 4.04266 10.742 4.64227 10.7447L4.64142 10.7438ZM15.3353 10.7438C15.9323 10.7393 16.409 10.2406 16.4072 9.6213C16.4055 9.01001 15.9161 8.49971 15.3285 8.49705C14.7314 8.4944 14.2309 9.02152 14.2403 9.64345C14.2497 10.2601 14.7365 10.7482 15.3353 10.7438ZM29.0341 12.2135H27.2011C27.6931 12.7938 28.273 13.0879 29.0341 12.8665V12.2135Z" fill="#B6B6B6" />
                                <Path d="M19.0396 6.67983C19.2 6.67983 19.3428 6.67243 19.4847 6.68147C19.8214 6.70286 19.9919 6.8715 19.9953 7.20385C20.0011 7.81507 20.002 8.42629 19.9953 9.03751C19.9919 9.35341 19.8214 9.53603 19.5015 9.54344C18.9741 9.5566 18.4451 9.55577 17.9177 9.54508C17.5809 9.53768 17.4247 9.36821 17.3979 8.99556C17.35 8.33909 17.109 7.76818 16.6026 7.32971C15.8342 6.66338 14.9466 6.50296 14.0085 6.88878C13.0428 7.28611 12.5599 8.05364 12.5079 9.07453C12.4608 9.99506 12.4608 10 11.506 10C10.1909 10 8.87502 10 7.55994 10C7.0628 10 6.90408 9.84863 6.9108 9.3567C6.92507 8.32922 6.56313 7.49835 5.61083 6.98585C4.08917 6.16732 2.19968 7.15614 2.02837 8.85489C1.96707 9.46199 1.86797 9.54837 1.23563 9.54919C1.01477 9.54919 0.793907 9.55331 0.573047 9.54837C0.180035 9.54014 0.00368269 9.37479 0.00284292 8.9972C-0.000516163 7.87759 -0.00135593 6.7588 0.00284292 5.63919C0.00452246 5.29286 0.178355 5.12257 0.530219 5.10283C0.664582 5.09543 0.798946 5.10118 0.933309 5.10118C1.05676 5.10118 1.1802 5.10118 1.31624 5.10118C1.59001 4.10497 1.85958 3.12767 2.1283 2.14956C2.28282 1.58769 2.43482 1.02501 2.59186 0.463146C2.69179 0.100362 2.81692 0.00493583 3.20237 0.00493583C5.96774 0.00329056 8.7331 0.00658111 11.4985 0C11.7773 0 11.9662 0.103653 12.1317 0.314248C12.9597 1.36311 13.7927 2.40786 14.6333 3.44686C14.7215 3.55545 14.8609 3.65005 14.9953 3.692C16.0265 4.01612 17.0594 4.33448 18.0982 4.6331C18.4215 4.72606 18.6029 4.88977 18.6718 5.218C18.7726 5.69595 18.9086 6.1665 19.0396 6.68065V6.67983ZM10.0591 4.72277C10.9031 4.72277 11.747 4.72113 12.5902 4.72359C12.8211 4.72359 13.0369 4.69809 13.1528 4.46775C13.2662 4.24153 13.1721 4.05643 13.0277 3.87463C12.4818 3.18444 11.9385 2.49177 11.4019 1.795C11.2323 1.57371 11.0307 1.47252 10.7427 1.47499C9.68792 1.48569 8.63317 1.47828 7.57842 1.47993C7.09807 1.47993 6.94103 1.63212 6.93851 2.10431C6.93431 2.7616 6.93515 3.41971 6.93851 4.077C6.94019 4.58128 7.08883 4.72195 7.61537 4.72359C8.43078 4.72524 9.24536 4.72359 10.0608 4.72359L10.0591 4.72277ZM6.04416 3.08983C6.04416 2.73281 6.05087 2.3766 6.04248 2.01958C6.03408 1.65679 5.85605 1.48486 5.49075 1.47993C5.04063 1.47417 4.58967 1.48157 4.13955 1.47746C3.84731 1.47417 3.66592 1.60908 3.59706 1.88138C3.41147 2.60859 3.22504 3.3358 3.05205 4.06548C2.95212 4.48585 3.14107 4.71372 3.58783 4.71948C4.22017 4.72771 4.85252 4.72771 5.48487 4.71948C5.872 4.71454 6.03744 4.54344 6.04416 4.15926C6.05003 3.80306 6.04583 3.44603 6.04499 3.08901L6.04416 3.08983Z" fill="#B6B6B6" />
                                <Path d="M24.0024 5.9902C24.0024 5.2179 23.9991 4.4456 24.0024 3.6733C24.0049 3.17032 24.1579 3.00235 24.6044 3.00141C25.3419 2.99953 26.0786 2.99953 26.8161 3.00141C27.2246 3.00235 27.3618 3.12809 27.4288 3.57665C27.6132 4.80219 27.8083 6.02492 27.9687 7.25516C28.0216 7.6643 27.9952 8.09127 27.9778 8.50792C27.9654 8.81196 27.7852 8.99214 27.5065 8.99401C26.4953 9.00152 25.4833 9.00246 24.4721 8.99401C24.162 8.9912 24.0074 8.79038 24.0041 8.40564C23.9967 7.60143 24.0016 6.79629 24.0016 5.99208L24.0024 5.9902ZM27.0476 7.94019C27.1006 7.66524 27.0683 7.47287 26.8467 7.30021C26.2712 6.85165 25.7165 6.36744 25.1526 5.89918C25.0897 5.84663 25.0203 5.80346 24.9409 5.74622V7.93925H27.0485L27.0476 7.94019Z" fill="#B6B6B6" />
                                <Path d="M7.99985 14.0189C7.99045 14.5718 7.5391 15.0073 6.98327 14.9999C6.42848 14.9936 5.99176 14.5446 6.00012 13.9885C6.00848 13.4377 6.4661 12.9907 7.01357 13.0001C7.56104 13.0096 8.00926 13.4723 7.99985 14.0189Z" fill="#B6B6B6" />
                                <Path d="M25 14.0094C24.9979 14.5739 24.5565 15.0062 23.9906 14.9999C23.452 14.9936 23.0095 14.554 23.0001 14.0157C22.9917 13.4732 23.4562 13.0011 24.0021 13C24.5544 12.9979 25.0021 13.4512 25 14.0105V14.0094Z" fill="#B6B6B6" />
                                <Path d="M4.51087 9.00004C4.78853 9.00369 5.00713 9.23197 4.99982 9.51064C4.99252 9.77536 4.76722 9.99878 4.50478 10C4.24052 10.0012 3.99879 9.75957 4 9.49486C4.00122 9.22347 4.23565 8.9964 4.51087 9.00004V9.00004Z" fill="#B6B6B6" />
                                <Path d="M15.0012 9.46592C15.0201 9.18519 15.2544 8.9818 15.5356 9.00129C15.8041 9.02017 16.0134 9.25401 15.9993 9.5189C15.9841 9.79232 15.7352 10.0189 15.4722 9.99876C15.194 9.97744 14.9823 9.73813 15.0012 9.46592V9.46592Z" fill="#B6B6B6" />
                            </Svg>

                        </View>
                    </View>
                    <View style={tailwind.style("flex flex-col w-[280px]")}>
                        <View style={tailwind.style("flex justify-start")}>
                            <Text style={tailwind.style("text-[#000000] text-[18px] font-bold ")}>
                                {item.status}
                            </Text>
                            <View style={tailwind.style("flex flex-row items-center")}>
                                <Svg width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <Path d="M12.4021 7.29102C12.4549 7.01562 12.4549 6.73438 12.4021 6.45898L12.9262 6.16797C12.9872 6.13477 13.0136 6.06641 12.9932 6.00195C12.8571 5.58008 12.6235 5.19727 12.3188 4.88086C12.2721 4.83203 12.1969 4.82031 12.136 4.85352L11.6118 5.14453C11.3904 4.96289 11.1365 4.82227 10.8622 4.72852V4.14648C10.8622 4.08008 10.8135 4.02148 10.7464 4.00781C10.2934 3.91016 9.83229 3.91406 9.40162 4.00781C9.33458 4.02148 9.28582 4.08008 9.28582 4.14648V4.72852C9.01158 4.82227 8.75764 4.96289 8.53621 5.14453L8.01209 4.85352C7.95318 4.82031 7.87599 4.83203 7.82926 4.88086C7.52454 5.19727 7.29093 5.58008 7.15482 6.00195C7.1345 6.06641 7.16294 6.13477 7.22186 6.16797L7.74597 6.45898C7.69315 6.73438 7.69315 7.01562 7.74597 7.29102L7.22186 7.58203C7.16091 7.61523 7.1345 7.68359 7.15482 7.74805C7.29093 8.16992 7.52454 8.55078 7.82926 8.86914C7.87599 8.91797 7.95115 8.92969 8.01209 8.89648L8.53621 8.60547C8.75764 8.78711 9.01158 8.92773 9.28582 9.02148V9.60352C9.28582 9.66992 9.33458 9.72852 9.40162 9.74219C9.85463 9.83984 10.3158 9.83594 10.7464 9.74219C10.8135 9.72852 10.8622 9.66992 10.8622 9.60352V9.02148C11.1365 8.92773 11.3904 8.78711 11.6118 8.60547L12.136 8.89648C12.1949 8.92969 12.2721 8.91797 12.3188 8.86914C12.6235 8.55273 12.8571 8.16992 12.9932 7.74805C13.0136 7.68359 12.9851 7.61523 12.9262 7.58203L12.4021 7.29102ZM10.0761 7.82227C9.53163 7.82227 9.0908 7.39648 9.0908 6.875C9.0908 6.35352 9.53366 5.92773 10.0761 5.92773C10.6185 5.92773 11.0613 6.35352 11.0613 6.875C11.0613 7.39648 10.6205 7.82227 10.0761 7.82227ZM4.55048 5C5.98672 5 7.15075 3.88086 7.15075 2.5C7.15075 1.11914 5.98672 0 4.55048 0C3.11423 0 1.95021 1.11914 1.95021 2.5C1.95021 3.88086 3.11423 5 4.55048 5ZM8.63779 9.42383C8.59106 9.40039 8.54434 9.37305 8.49965 9.34766L8.33916 9.4375C8.21727 9.50391 8.07913 9.54102 7.94099 9.54102C7.71956 9.54102 7.50626 9.45117 7.3539 9.29492C6.98214 8.9082 6.69774 8.4375 6.53725 7.93555C6.42552 7.58984 6.57585 7.22461 6.90088 7.04297L7.06137 6.95312C7.05934 6.90234 7.05934 6.85156 7.06137 6.80078L6.90088 6.71094C6.57585 6.53125 6.42552 6.16406 6.53725 5.81836C6.55553 5.76172 6.58194 5.70508 6.60226 5.64844C6.52506 5.64258 6.4499 5.625 6.37067 5.625H6.03142C5.58043 5.82422 5.07866 5.9375 4.55048 5.9375C4.0223 5.9375 3.52256 5.82422 3.06954 5.625H2.73029C1.22294 5.625 0 6.80078 0 8.25V9.0625C0 9.58008 0.436765 10 0.975103 10H8.12586C8.33103 10 8.52199 9.9375 8.67842 9.83398C8.65404 9.75977 8.63779 9.68359 8.63779 9.60352V9.42383Z" fill="#B6B6B6" />
                                </Svg>
                                <Text style={tailwind.style("text-[#B6B6B6] text-[14px] font-light ml-[5px]")}>
                                    Requested by Henry Mccormick
                                </Text>
                            </View>
                        </View>
                    </View>
                    <View style={tailwind.style("flex mb-8")}>
                        <TouchableOpacity
                            onPress={() => navigation.navigate("ServiceTimer")}
                        >
                            <Svg width="6" height="25" viewBox="0 0 5 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <Circle cx="2.58622" cy="2.41379" r="2.41379" fill="#D9D9D9" />
                                <Circle cx="2.58622" cy="9.99998" r="2.41379" fill="#D9D9D9" />
                                <Circle cx="2.58622" cy="17.5862" r="2.41379" fill="#D9D9D9" />
                            </Svg>
                        </TouchableOpacity>
                    </View>
                </View>
            </View>
        )
    }
}